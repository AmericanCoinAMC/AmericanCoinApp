app.factory("BookmarkLeaders",["$firebaseArray",function(e){var r=e.$extend({isBookmarked:function(e){if(e){var r=e.$id||e.id,o=!1;return angular.forEach(this.$list,function(e){r==e.$id&&(o=!0)}),o}},getTotal:function(){var e=0;return angular.forEach(this.$list,function(r){e+=1}),e}});return function(e){return new r(e)}}]).factory("BookmarkLeadersService",["$q","$rootScope","LeaderObjectService",function(e,r,o){return{addLeader:function(t){var n=e.defer(),a=rootRef.child("bookmarkedLeaders/"+r.userInfo.$id+"/"+this.getElementId(t));return a.set(o.buildMinified(t)).then(function(){n.resolve(!0)}).catch(function(e){n.reject(e)}),n.promise},removeLeader:function(o){var t=e.defer(),n=rootRef.child("bookmarkedLeaders/"+r.userInfo.$id+"/"+this.getElementId(o));return n.remove().then(function(){t.resolve(!0)}).catch(function(e){t.reject(e)}),t.promise},getElementId:function(e){return e.$id||e.id}}}]).directive("bookmarkLeaderElement",["$rootScope","BookmarkLeadersService",function(e,r){return{restrict:"E",scope:{leader:"="},templateUrl:"/core/common/Bookmark/bookmark.html",link:function(o,t,n){o.isBookmarked=!1,o.bookmarkLeaders=e.bookmarkLeaders,o.$watch("bookmarkLeaders.isBookmarked(leader)",function(e,r){void 0!=e&&(o.isBookmarked=e)},!0),o.$watch("leader",function(e,r){void 0!=e&&(o.leader=e)},!0),o.toggle=function(){o.isBookmarked?r.removeLeader(o.leader):r.addLeader(o.leader)}}}}]);