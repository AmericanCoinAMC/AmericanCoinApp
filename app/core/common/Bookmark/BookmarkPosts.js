app.factory("BookmarkPosts",["$firebaseArray",function(o){var t=o.$extend({isBookmarked:function(o){if(o){var t=!1;return angular.forEach(this.$list,function(r){o.$id==r.$id&&(t=!0)}),t}},getTotal:function(){var o=0;return angular.forEach(this.$list,function(t){o+=1}),o}});return function(o){return new t(o)}}]).factory("BookmarkPostsService",["$q","$rootScope","PostObjectService",function(o,t,r){return{addPost:function(e){var n=o.defer(),i=rootRef.child("bookmarkedPosts/"+t.userInfo.$id+"/"+e.$id);return i.set(r.buildMinified(e)).then(function(){n.resolve(!0)}).catch(function(o){n.reject(o)}),n.promise},removePost:function(r){var e=o.defer(),n=rootRef.child("bookmarkedPosts/"+t.userInfo.$id+"/"+r.$id);return n.remove().then(function(){e.resolve(!0)}).catch(function(o){e.reject(o)}),e.promise}}}]).directive("bookmarkPostElement",["$rootScope","BookmarkPostsService",function(o,t){return{restrict:"E",scope:{post:"="},templateUrl:"/core/common/Bookmark/bookmark.html",link:function(r,e,n){r.isBookmarked=!1,r.bookmarkPosts=o.bookmarkPosts,r.$watch("bookmarkPosts.isBookmarked(post)",function(o,t){void 0!=o&&(r.isBookmarked=o)},!0),r.$watch("post",function(o,t){void 0!=o&&(r.post=o)},!0),r.toggle=function(){r.isBookmarked?t.removePost(r.post):t.addPost(r.post)}}}}]);