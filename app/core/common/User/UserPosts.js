app.factory("UserPosts",["$firebaseArray",function(t){var e=t.$extend({userHasPost:function(t){if(t){var e=!1;return angular.forEach(this.$list,function(o){t.$id==o.$id&&(e=!0)}),e}}});return function(t){return new e(t)}}]).factory("UserPostsService",["$q","$rootScope","PostObjectService",function(t,e,o){return{addPost:function(o){var s=t.defer(),r=rootRef.child("userPosts/"+e.userInfo.$id+"/"+o.$id);return r.setWithPriority(this.buildPostObject(o),o.$priority).then(function(){s.resolve(!0)}).catch(function(t){s.reject(t)}),s.promise},removePost:function(o){var s=t.defer(),r=rootRef.child("userPosts/"+e.userInfo.$id+"/"+o.$id);return r.remove().then(function(){s.resolve(!0)}).catch(function(t){s.reject(t)}),s.promise},buildPostObject:function(t){return o.buildMinified(t)}}}]).directive("userPostElement",["$rootScope","UserPosts","UserPostsService",function(t,e,o){return{restrict:"E",scope:{post:"="},templateUrl:"/core/common/User/userPosts.html",link:function(s,r,n){s.userPosts=e(rootRef.child("userPosts/"+t.userInfo.$id)),s.$watch("userPosts.userHasPost(post)",function(t,e){void 0!=t&&(s.hasPost=t)},!0),s.togglePost=function(t){s.userPosts.userHasPost(t)?s.removePost(t):s.addPost(t)},s.addPost=function(t){o.addPost(t).then(function(){}).catch(function(t){console.log(t),Message.toast({text:"Hubo un error.",theme:"toast-red"})})},s.removePost=function(t){o.removePost(t).then(function(){}).catch(function(t){console.log(t),Message.toast({text:"Hubo un error.",theme:"toast-red"})})}}}}]);