"use strict";var User=function(){var e=this;e.db=new Database({refs:{primary:"users"},schema:{primary:{name:{value:"="},email:{value:"="},birthday:{value:"="},gender:{value:"="},preferences:{value:"="},location:{value:"="},authority:{value:"=",default:0},isAdmin:{value:"=",default:!1}},foreign:{name:{value:"="}},priority:{order:"dateDesc"}}})};User.prototype.isAdmin=function(e){var n=this;return new Promise(function(t,r){n.db.ref.root.child(n.db.ref.primary+"/"+e+"/isAdmin").once("value").then(function(e){t(e.val())}).catch(function(e){r(e)})})},User.prototype.getAuthInfo=function(){return firebase.auth().currentUser},User.prototype.getUserInfo=function(e){var n=this;return new Promise(function(t,r){n.db.ref.root.child(n.db.ref.primary+"/"+e).once("value").then(function(e){t(e.exists()?n.db.schema.build(e,"snapshot"):null)}).catch(function(e){r(e)})})},User.prototype.signIn=function(e){var n=this;return new Promise(function(t,r){switch(e.provider){case"email":n.signInWithEmail(e).then(function(){t(!0)}).catch(function(e){r(e)})}})},User.prototype.signOut=function(){firebase.auth().signOut()},User.prototype.signInWithEmail=function(e){return new Promise(function(n,t){firebase.auth().signInWithEmailAndPassword(e.email,e.password).then(function(e){n(e)}).catch(function(e){t(e)})})},User.prototype.emailExists=function(e){var n=this;return new Promise(function(t,r){n.db.ref.root.child(n.db.ref.primary).orderByChild("email").equalTo(e).once("value").then(function(e){t(e.exists())}).catch(function(e){r(e)})})};