app.factory("OrionOpenGraphExtractor",["$q","$rootScope","$http",function(e,t,i){var r,o={facebook:{title:null,description:null,image:null},ogioOpenGraph:{title:null,description:null,image:null},ogioHybridGraph:{title:null,description:null,image:null},ogioHtmlInferred:{title:null,description:null,image:null}};return{get:function(t){var i=this,n=e.defer();return r=t,i.populateFacebookGraph().then(function(){i.populateOgioGraph().then(function(){n.resolve(o)}).catch(n.resolve(o))}).catch(function(e){i.populateOgioGraph().then(function(){n.resolve(o)}).catch(function(e){n.reject(e)})}),n.promise},populateFacebookGraph:function(){var t=this,i=e.defer();return t.extractFacebookGraph().then(function(e){o.facebook={title:e.title||!1,description:e.description||!1,image:e.image[0].url||!1},i.resolve(!0)}).catch(function(e){o.facebook={title:!1,description:!1,image:!1},i.reject(e)}),i.promise},extractFacebookGraph:function(){var t=e.defer();return FB.api("/","POST",{scrape:"true",id:r},function(e){e&&!e.error?t.resolve(e):e.error&&t.reject(e.error)}),t.promise},populateOgioGraph:function(){var t=this,i=e.defer();return t.extractOgioGraph().then(function(e){o.ogioOpenGraph={title:e.openGraph.title||!1,description:e.openGraph.description||!1,image:e.openGraph.image||!1},o.ogioHybridGraph={title:e.hybridGraph.title||!1,description:e.hybridGraph.description||!1,image:e.hybridGraph.image||!1},o.ogioHtmlInferred={title:e.htmlInferred.title||!1,description:e.htmlInferred.description||!1,image:e.htmlInferred.image_guess||e.htmlInferred.images[0]||!1},i.resolve(!0)}).catch(function(e){o.ogioOpenGraph={title:!1,description:!1,image:!1},o.ogioHybridGraph={title:!1,description:!1,image:!1},o.ogioHtmlInferred={title:!1,description:!1,image:!1},i.reject(e)}),i.promise},extractOgioGraph:function(){var o=e.defer();return i.get("https://opengraph.io/api/1.0/site/"+r+"?app_id="+t.apiKeysObject.item.ogioApi.appId).then(function(e){o.resolve(e.data)},function(e){o.reject(e)}),o.promise}}}]);