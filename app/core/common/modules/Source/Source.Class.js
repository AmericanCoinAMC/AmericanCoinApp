"use strict";var Source=function(){var t=this;t.db=new Database({refs:{primary:"sources/information",primaryStorage:"sources"},schema:{primary:{name:{value:"="},description:{value:"="},fileUrl:{value:"="},fileName:{value:"="},status:{value:"="},profile:{value:"="},articleConfig:{value:"="}},secondary:{name:{value:"="}},foreign:{name:{value:"="},description:{value:"="},fileUrl:{value:"="},status:{value:"="},profile:{value:"="},articleConfig:{value:"="}},priority:{order:"custom",childAdded:"last"}}})};Source.prototype.create=function(t){var e=this;return new Promise(function(n,i){e.db.atomicFile.upload(t.file).then(function(o){t.fileName=o.fileName,t.fileUrl=o.fileUrl,e.db.atomicPriority.getPriority(t).then(function(o){t.$priority=o,e.db.query.create(t).then(function(t){n(t)}).catch(function(t){i(t)})}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},Source.prototype.alter=function(t){var e=this;return new Promise(function(n,i){t.updateFile?e.updateWithFile(t).then(function(){n(!0)}).catch(function(t){i(t)}):e.update(t).then(function(){n(!0)}).catch(function(t){i(t)})})},Source.prototype.update=function(t){var e=this;return new Promise(function(n,i){e.db.query.update(t).then(function(){n(!0)}).catch(function(t){i(t)})})},Source.prototype.updateWithFile=function(t){var e=this;return new Promise(function(n,i){e.db.atomicFile.upload(t.file).then(function(o){e.db.atomicFile.delete(t.fileName).then(function(){t.fileName=o.fileName,t.fileUrl=o.fileUrl,e.update(t).then(function(){n(!0)}).catch(function(t){e.db.atomicFile.delete(fileName).then(function(){i(t)}).catch(function(t){i(t)})})}).catch(function(n){e.db.atomicFile.delete(t.fileName).then(function(){i(n)}).catch(function(t){i(t)})})}).catch(function(t){i(t)})})},Source.prototype.remove=function(t){var e=this;return new Promise(function(n,i){e.db.atomicFile.delete(t.fileName).then(function(){e.db.query.remove(t).then(function(){n(!0)}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},Source.prototype.moveToFirst=function(t){var e=this;return new Promise(function(n,i){e.db.atomicPriority.first().then(function(o){t.$priority=o,e.update(t).then(function(){n(!0)}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},Source.prototype.moveToLast=function(t){var e=this;return new Promise(function(n,i){e.db.atomicPriority.last().then(function(o){t.$priority=o,e.update(t).then(function(){n(!0)}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},Source.prototype.moveBefore=function(t,e){var n=this;return new Promise(function(i,o){n.db.atomicPriority.previous(e).then(function(e){t.$priority=e,n.update(t).then(function(){i(!0)}).catch(function(t){o(t)})}).catch(function(t){o(t)})})},Source.prototype.moveNext=function(t,e){var n=this;return new Promise(function(i,o){n.db.atomicPriority.next(e).then(function(e){t.$priority=e,n.update(t).then(function(){i(!0)}).catch(function(t){o(t)})}).catch(function(t){o(t)})})};