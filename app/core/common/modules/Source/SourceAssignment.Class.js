"use strict";var SourceAssignment=function(e){var r=this;r.source=e,r.db=new Database({refs:{primary:"sources/assignments/"+r.source.$key||r.source.key},schema:{primary:{name:{value:"="}}}})};SourceAssignment.prototype.assign=function(e){var r=this;return new Promise(function(n,t){var s=r.db.ref.root.child(r.db.ref.primary+"/"+e.$key||e.key);s.set({name:e.name,latestServerTS:firebase.database.ServerValue.TIMESTAMP}).then(function(){n(!0)}).catch(function(e){t(e)})})},SourceAssignment.prototype.unassign=function(e){var r=this;return new Promise(function(n,t){var s=r.db.ref.root.child(r.db.ref.primary+"/"+e.$key||e.key);s.update({latestServerTS:firebase.database.ServerValue.TIMESTAMP}).then(function(){s.remove().then(function(){n(!0)}).catch(function(e){t(e)})}).catch(function(e){t(e)})})},SourceAssignment.prototype.isAssigned=function(e){var r=this;return new Promise(function(n,t){var s=r.db.ref.root.child(r.db.ref.primary+e.$key||e.key);s.once("value").then(function(e){n(e.exists())}).catch(function(e){t(e)})})};