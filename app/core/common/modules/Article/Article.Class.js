"use strict";var Article=function(){var e=this;e.db=new Database({refs:{primary:"articles/approved/all",secondary:function(e){var a=[];return new Promise(function(t,u){a.push("articles/approved/categories/"+e.category.key+"/"+e.$key),a.push("articles/approved/sources/"+e.source.key+"/"+e.category.key+"/"+e.$key),t(a)})},foreign:function(e){var a=[];return new Promise(function(t,u){a.push("articles/approved/outstanding/"+e.$key),t(a)})}},schema:{primary:{url:{value:"="},title:{value:"="},description:{value:"="},image:{value:"="},content:{value:"="},outstanding:{value:"=",default:!1},notificationPushed:{value:"=",default:!1},category:{value:"="},source:{value:"="},primaryHashtag:{value:"=",default:null},secondaryHashtags:{value:"=",default:null},leaders:{value:"=",default:null},views:{value:"=",default:0},subscriptions:{value:"=",default:0}},secondary:{url:{value:"="},title:{value:"="},description:{value:"="},image:{value:"="},content:{value:"="},outstanding:{value:"=",default:!1},notificationPushed:{value:"=",default:!1},category:{value:"="},source:{value:"="},primaryHashtag:{value:"=",default:null},secondaryHashtags:{value:"=",default:null},leaders:{value:"=",default:null},views:{value:"=",default:0},subscriptions:{value:"=",default:0}},foreign:{url:{value:"="},title:{value:"="},description:{value:"="},image:{value:"="},content:{value:"="},outstanding:{value:"=",default:!1},notificationPushed:{value:"=",default:!1},category:{value:"="},source:{value:"="},primaryHashtag:{value:"=",default:null},secondaryHashtags:{value:"=",default:null},leaders:{value:"=",default:null},views:{value:"=",default:0},subscriptions:{value:"=",default:0}},priority:{order:function(e){return-e.creationTS}}}})};Article.prototype.toggleOutstanding=function(e){var a=this;return new Promise(function(t,u){e.outstanding=!e.outstanding,a.db.query.update(e).then(function(){e.outstanding||a.removeOutstandingArticle(e),t(!0)}).catch(function(e){u(e)})})},Article.prototype.removeOutstandingArticle=function(e){var a=this;return new Promise(function(t,u){var l=a.db.ref.root.child("articles/approved/outstanding/"+e.$key);l.remove().then(function(){t(!0)}).catch(function(e){u(e)})})};