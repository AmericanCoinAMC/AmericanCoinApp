app.run(["$rootScope","$state","$stateParams","Message","$mdMedia","$mdSidenav","amMoment","$window","$timeout",function(e,t,o,n,a,r,c,i,s){c.changeLocale("es"),e.preloader=!1,e.userAuthenticated=!1,e.userInfo={},e.firebaseUser={},e.appContainer="views-container";var u=new User;firebase.auth().onAuthStateChanged(function(o){o?(e.userAuthenticated=!0,e.firebaseUser=o,u.getUserInfo(e.firebaseUser.uid).then(function(t){e.userInfo=t}),"intro"==t.current.name&&t.go("app.dashboard")):(e.userAuthenticated=!1,e.firebaseUser={},e.userInfo={},t.go("intro"))}),e.$on("$stateChangeStart",function(t,o,n,a,c,i){e.preloader=!0,e.toState=o,e.fromState=a,e.toStateParams=n,e.fromStateParams=c,a.name&&r("left").isOpen()&&r("left").close()}),e.$on("$stateChangeSuccess",function(t,o,n,a,r){e.preloader=!1,e.currentState=o}),e.$on("$stateChangeError",function(o,a,r,c,i,s){console.log("stateChangeError"),console.log(s),"AUTH_REQUIRED"===s?("intro"!=t.current.name&&t.go("intro"),n.toast({text:"Debes iniciar sesion.",theme:"toast-red"}),e.preloader=!1):"NOT_AUTHORIZED"===s&&(t.go(c.name),e.preloader=!1,n.toast({text:"No tienes acceso a "+a.name,theme:"toast-red"}))});var d=new ActiveTask;e.activeTasksAtomicArray=d.db.atomicArray,e.activeTasksAtomicArray.$on({initialLotSize:1e8}).then(function(e){document.addEventListener(e+"_apply_filters",function(){s(function(){})},!1),s(function(){})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el activeTasksAtomicArray.",theme:"toast-red"})});var f=new CompletedTask;e.completedTasksAtomicArray=f.db.atomicArray,e.completedTasksAtomicArray.$on({initialLotSize:1e8}).then(function(e){document.addEventListener(e+"_apply_filters",function(){s(function(){})},!1),s(function(){})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el completedTasksAtomicArray.",theme:"toast-red"})});var m=new CompletedTask;e.rejectedTasksAtomicArray=m.db.atomicArray,e.rejectedTasksAtomicArray.$on({initialLotSize:1e8}).then(function(e){document.addEventListener(e+"_apply_filters",function(){s(function(){})},!1),s(function(){})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el rejectedTasksAtomicArray.",theme:"toast-red"})});var l=new OrionHost;e.orionHostObject=new AtomicObject(l.db),e.orionHostObject.$on().then(function(e){document.addEventListener(e+"_object_changed",function(e){s(function(){})},!1)}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el orionHostObject.",theme:"toast-red"})});var b=new OrionActivity;e.orionActivityObject=new AtomicObject(b.db),e.orionActivityObject.$on().then(function(e){document.addEventListener(e+"_object_changed",function(e){s(function(){})},!1)}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el orionActivityObject.",theme:"toast-red"})});var p=new ApiKeys;e.apiKeysObject=new AtomicObject(p.db),e.apiKeysObject.$on().then(function(t){document.addEventListener(t+"_object_changed",function(e){s(function(){})},!1),i.fbAsyncInit=function(){FB.init({appId:e.apiKeysObject.item.facebookApi.appId,status:!0,cookie:!0,xfbml:!0,version:"v2687046"})}}).catch(function(e){console.log(e),n.toast({text:"Hubo un error construyendo el apiKeysObject.",theme:"toast-red"})}),function(e){var t,o="facebook-jssdk",n=e.getElementsByTagName("script")[0];e.getElementById(o)||(t=e.createElement("script"),t.id=o,t.async=!0,t.src="https://connect.facebook.net/en_US/all.js",n.parentNode.insertBefore(t,n))}(document)}]);