app.component("categories",{templateUrl:"/core/components/app/categories/categories.html",bindings:{},controller:["$rootScope","$scope","Dialog","Message","$timeout",function(e,t,o,n,c){var i=new Category;t.config={atomicArray:i.db.atomicArray,parentScope:t,initialLotSize:1e3,nextLotSize:1e3,templateUrl:"/core/components/app/categories/categories.tpl.html",wrapper:"infiniteScroll",animation:{type:"entrance",in:"zoomIn",out:"zoomOut"}},t.itemSelected=!1,t.selectedItem={},t.updateFile=!1,t.submitting=!1,t.save=function(){t.itemSelected?t.update():t.create()},t.create=function(){t.submitting=!0,void 0==t.files[0]?t.selectedItem.file=!1:t.selectedItem.file=t.files[0].lfFile,t.selectedItem.file?i.create(t.selectedItem).then(function(e){t.cancel()}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()}):(t.submitting=!1,n.toast({text:"Debes subir una imagen.",theme:"toast-warning"}))},t.update=function(){t.submitting=!0,t.selectedItem.updateFile=t.updateFile,void 0==t.files[0]?t.selectedItem.file=!1:t.selectedItem.file=t.files[0].lfFile;var e=!1;e=!!(t.updateFile&&t.selectedItem.file||!t.updateFile&&!t.selectedItem.file),e?i.alter(t.selectedItem).then(function(){t.cancel()}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()}):(t.submitting=!1,n.toast({text:"Debes subir una imagen o cancelar el cambio de imagen.",theme:"toast-warning"}))},t.remove=function(o){e.submitting=!0,i.remove(o).then(function(){t.cancel()}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.selectItem=function(e,o){t.itemSelected=!0,t.selectedItem=o,t.showForm(e)},t.showForm=function(e){void 0==t.itemSelected.autoSave&&(t.itemSelected.autoSave=!1);var n={templateUrl:"/core/components/app/categories/categoryForm.html"};o.show(e,t,n)},t.moveToFirst=function(o){e.preloader=!0,i.moveToFirst(o).then(function(){c(function(){t.cancel()})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.moveBefore=function(o,a){e.preloader=!0,i.moveBefore(o,a).then(function(){c(function(){t.cancel()})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.moveNext=function(o,a){e.preloader=!0,i.moveNext(o,a).then(function(){c(function(){t.cancel()})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.moveToLast=function(o){e.preloader=!0,i.moveToLast(o).then(function(){c(function(){t.cancel()})}).catch(function(e){console.log(e),n.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.changeFile=function(){t.updateFile=!0},t.cancelFileChange=function(){t.updateFile=!1},t.cancel=function(){e.preloader=!1,t.itemSelected=!1,t.selectedItem={},t.submitting=!1,t.updateFile=!1,o.hide()},e.$on("queryUpdate",function(e,o){t.query=o})}]});