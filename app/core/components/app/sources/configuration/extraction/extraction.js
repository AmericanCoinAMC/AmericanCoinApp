app.directive("sourceExtractionConfig",["$timeout","Message",function(o,t){return{restrict:"E",scope:{source:"="},templateUrl:"/core/components/app/sources/configuration/extraction/extraction.html",link:function(e,c,n){e.loaded=!1,e.extractionTypes={facebookGraph:"facebookGraph",ogioOpenGraph:"ogioOpenGraph",ogioHybridGraph:"ogioHybridGraph",ogioHtmlInferred:"ogioHtmlInferred"},e.save=function(){e.sourceExtractionClass.save(e.atomicObject.item).then(function(){t.toast({text:"Los cambios han sido guardados.",theme:"toast-green"})}).catch(function(o){t.toast({text:"Hubo un error.",theme:"toast-red"}),console.log(o)})},e.$watch("source",function(c,n){void 0!=c&&(e.source=c,e.sourceExtractionClass=new SourceExtraction(e.source),e.atomicObject=new AtomicObject(e.sourceExtractionClass.db),e.atomicObject.$on().then(function(t){e.loaded=!0,document.addEventListener(t+"_object_changed",function(t){o(function(){e.atomicObject.item=t})},!1)}).catch(function(o){t.toast({text:"Hubo un error.",theme:"toast-red"}),console.log(o)}))},!0)}}}]);