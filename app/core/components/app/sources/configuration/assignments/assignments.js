app.directive("sourceAssignments",["$timeout","Message",function(n,e){return{restrict:"E",scope:{source:"="},templateUrl:"/core/components/app/sources/configuration/assignments/assignments.html",link:function(t,r,i){var o=new SourceAssignment(t.source);t.atomicArray=o.db.atomicArray,t.atomicArray.$on({initialLotSize:1e3}).then(function(e){document.addEventListener(t.atomicArray.id+"_apply_filters",function(){n(function(){})},!1),n(function(){})});var c=new User;t.userAtomicArray=c.db.atomicArray,t.userAtomicArray.$on({initialLotSize:1e3}).then(function(e){document.addEventListener(t.userAtomicArray.id+"_apply_filters",function(){n(function(){})},!1)}),t.assigning=!1,t.searchQuery="",t.assign=function(n){o.assign(n).then(function(){t.cancel()}).catch(function(n){console.log(n),e.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.unassign=function(n){o.unassign(n).then(function(){t.cancel()}).catch(function(n){console.log(n),e.toast({text:"Hubo un error.",theme:"toast-red"}),t.cancel()})},t.assignMode=function(){t.assigning=!0},t.search=function(n){return n?t.userAtomicArray.items.filter(t.createFilterFor(n)):t.userAtomicArray.items},t.createFilterFor=function(n){angular.lowercase(n);return function(e){var t=0===n.indexOf(e.name);return console.log(t),t}},t.cancel=function(){t.selectedUser="",t.searchQuery="",t.assigning=!1},t.$watch("source",function(n,e){void 0!=n&&(t.source=n)},!0)}}}]);